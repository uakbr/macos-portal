{"ast":null,"code":"import _toConsumableArray from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/usa/Downloads/macos-portfolio-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component,createRef}from\"react\";import format from\"date-fns/format\";import{BiSearch}from\"react-icons/bi\";import apps from\"../configs/apps\";import launchpad from\"../configs/launchpad\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var allApps={app:apps,portfolio:launchpad};var getRandom=function getRandom(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min+1))+min;};var getRandomDate=function getRandomDate(){var timeStamp=new Date().getTime();var randomStamp=getRandom(0,timeStamp);var date=format(randomStamp,\"MM/dd/yyyy\");return date;};var Spotlight=/*#__PURE__*/function(_Component){_inherits(Spotlight,_Component);var _super=_createSuper(Spotlight);function Spotlight(props){var _this;_classCallCheck(this,Spotlight);_this=_super.call(this,props);_this.search=function(type){if(_this.state.searchText===\"\")return[];var text=_this.state.searchText.toLowerCase();var list=allApps[type].filter(function(item){return item.title.toLowerCase().includes(text)||item.id.toLowerCase().includes(text);});return list;};_this.handleClick=function(id){var curSelectIndex=_this.state.appIdList.findIndex(function(item){return item===id;});_this.updateHighlight(_this.curSelectIndex,curSelectIndex);_this.curSelectIndex=curSelectIndex;_this.updateCurDetails();};_this.handleDoubleClick=function(id){_this.handleClick(id);_this.launchCurApp();};_this.launchCurApp=function(){if(_this.state.curDetails.type===\"app\"&&!_this.state.curDetails.link){var id=_this.state.curDetails.id;if(id===\"launchpad\")_this.props.toggleLaunchpad(true);else _this.props.openApp(id);_this.props.toggleSpotlight();}else{window.open(_this.state.curDetails.link);_this.props.toggleSpotlight();}};_this.getTypeAppList=function(type,startIndex){var result=_this.search(type);var appList=[];var appIdList=[];var _iterator=_createForOfIteratorHelper(result),_step;try{var _loop=function _loop(){var app=_step.value;var curIndex=startIndex+appIdList.length;var bg=curIndex===0?\"bg-blue-500\":\"bg-transparent\";var text=curIndex===0?\"text-white\":\"text-black\";if(curIndex===0)_this.setCurDetails(app,type);appList.push(/*#__PURE__*/_jsxs(\"li\",{id:\"spotlight-\".concat(app.id),className:\"pl-4 h-7 w-full pr-1 flex flex-row \".concat(bg,\" \").concat(text,\" cursor-default\"),\"data-app-type\":type,onClick:function onClick(){return _this.handleClick(app.id);},onDoubleClick:function onDoubleClick(){return _this.handleDoubleClick(app.id);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-none w-8 flex items-center\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-5 mx-auto\",src:app.img,alt:app.title,title:app.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow flex items-center pl-3 overflow-hidden whitespace-nowrap\",children:app.title})]},\"spotlight-\".concat(app.id)));appIdList.push(app.id);};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}return{appList:appList,appIdList:appIdList};};_this.updateAppList=function(){var app=_this.getTypeAppList(\"app\",0);var portfolio=_this.getTypeAppList(\"portfolio\",app.appIdList.length);var appIdList=[].concat(_toConsumableArray(app.appIdList),_toConsumableArray(portfolio.appIdList));// don't show app details when there is no associating app\nif(appIdList.length===0)_this.setState({curDetails:null});var appList=/*#__PURE__*/_jsxs(\"div\",{children:[app.appList.length!==0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"pl-6 py-0.5 text-xs leading-none bg-gray-400 bg-opacity-80 flex items-center text-black\",children:\"Applications\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"w-full text-xs\",children:app.appList})]}),portfolio.appList.length!==0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"pl-6 py-0.5 text-xs leading-none bg-gray-400 bg-opacity-80 flex items-center text-black\",children:\"Portfolio\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"w-full text-xs\",children:portfolio.appList})]})]});_this.setState({appList:appList,appIdList:appIdList});};_this.setCurDetails=function(app,type){var curDetails=app;curDetails.type=type;_this.setState({curDetails:curDetails});};_this.updateCurDetails=function(){var appId=_this.state.appIdList[_this.curSelectIndex];var elem=document.querySelector(\"#spotlight-\".concat(appId));var id=appId;var type=elem.dataset.appType;var app=allApps[type].find(function(item){return item.id===id;});_this.setCurDetails(app,type);};_this.updateHighlight=function(prevIndex,curIndex){// remove highlight\nvar prevAppId=_this.state.appIdList[prevIndex];var prev=document.querySelector(\"#spotlight-\".concat(prevAppId));var classes=prev.className;classes=classes.replace(\"text-white\",\"text-black\");classes=classes.replace(\"bg-blue-500\",\"bg-transparent\");prev.className=classes;// add highlight\nvar curAppId=_this.state.appIdList[curIndex];var cur=document.querySelector(\"#spotlight-\".concat(curAppId));classes=cur.className;classes=classes.replace(\"text-black\",\"text-white\");classes=classes.replace(\"bg-transparent\",\"bg-blue-500\");cur.className=classes;};_this.handleKeyPress=function(e){var keyCode=e.key;var numApps=_this.state.appIdList.length;// ----------- select next app -----------\nif(keyCode===\"ArrowDown\"&&_this.curSelectIndex<numApps-1){_this.curSelectIndex++;_this.updateHighlight(_this.curSelectIndex-1,_this.curSelectIndex);_this.updateCurDetails();}// ----------- select previous app -----------\nelse if(keyCode===\"ArrowUp\"&&_this.curSelectIndex>0){_this.curSelectIndex--;_this.updateHighlight(_this.curSelectIndex+1,_this.curSelectIndex);_this.updateCurDetails();}// ----------- launch app -----------\nelse if(keyCode===\"Enter\"){if(!_this.state.curDetails)return;_this.launchCurApp();}};_this.handleInputChange=function(e){// current selected id go back to 0\n_this.curSelectIndex=0;// don\"t show app details when there is no input\nif(e.target.value===\"\")_this.setState({curDetails:null});// update search text and associating app list\n_this.setState({searchText:e.target.value},function(){return _this.updateAppList();});};_this.focusOnInput=function(){document.querySelector(\"#spotlight-input\").focus();};_this.state={searchText:\"\",curDetails:null,appList:null,appIdList:[]};_this.curSelectIndex=0;_this.spotlightRef=/*#__PURE__*/createRef();_this.handleClickOutside=_this.handleClickOutside.bind(_assertThisInitialized(_this));return _this;}_createClass(Spotlight,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener(\"mousedown\",this.handleClickOutside);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener(\"mousedown\",this.handleClickOutside);}},{key:\"handleClickOutside\",value:function handleClickOutside(e){if(this.spotlightRef&&!this.spotlightRef.current.contains(e.target)&&!this.props.btnRef.current.contains(e.target))this.props.toggleSpotlight();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"spotlight fixed top-1/4 -mt-16 h-max rounded-md bg-gray-50 bg-opacity-80 blur border border-gray-400 border-opacity-50 shadow-2xl\",style:{zIndex:99997},onKeyDown:this.handleKeyPress,onClick:this.focusOnInput,ref:this.spotlightRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full grid grid-cols-8 sm:grid-cols-11 h-12 sm:h-14 rounded-md bg-transparent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-start-1 col-span-1 flex justify-center items-center\",children:/*#__PURE__*/_jsx(BiSearch,{className:\"ml-1 text-gray-600\",size:28})}),/*#__PURE__*/_jsx(\"input\",{id:\"spotlight-input\",className:\"col-start-2 col-span-7 sm:col-span-10 outline-none focus:outline-none bg-transparent px-1 text-black text-xl sm:text-2xl\",placeholder:\"Spotlight Search\",value:this.state.searchText,onChange:function onChange(e){return _this2.handleInputChange(e);},autoFocus:true})]}),this.state.searchText!==\"\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-transparent flex flex-row border-t border-gray-400 border-opacity-50\",style:{height:\"341px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-none w-32 sm:w-72 border-r border-gray-400 border-opacity-50 overflow-y-scroll\",children:this.state.appList}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow\",children:this.state.curDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"h-full w-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto w-4/5 flex-none flex flex-col items-center justify-center h-56 border-b border-gray-400 border-opacity-50\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-32 mx-auto\",src:this.state.curDetails.img,alt:this.state.curDetails.title,title:this.state.curDetails.title}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-xl text-black\",children:this.state.curDetails.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Version: \".concat(getRandom(0,99),\".\").concat(getRandom(0,999))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow flex flex-row text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-none w-1/2 flex flex-col items-end justify-center text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Kind\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Size\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Modified\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Last opened\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-2 flex-grow flex flex-col items-start justify-center text-black\",children:[/*#__PURE__*/_jsx(\"div\",{children:this.state.curDetails.type===\"app\"?\"Application\":\"Portfolio\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\".concat(getRandom(0,999),\" G\")}),/*#__PURE__*/_jsx(\"div\",{children:getRandomDate()}),/*#__PURE__*/_jsx(\"div\",{children:getRandomDate()}),/*#__PURE__*/_jsx(\"div\",{children:getRandomDate()})]})]})]})})]})]});}}]);return Spotlight;}(Component);export{Spotlight as default};","map":{"version":3,"sources":["C:/Users/usa/Downloads/macos-portfolio-main/src/components/Spotlight.js"],"names":["React","Component","createRef","format","BiSearch","apps","launchpad","allApps","app","portfolio","getRandom","min","max","Math","ceil","floor","random","getRandomDate","timeStamp","Date","getTime","randomStamp","date","Spotlight","props","search","type","state","searchText","text","toLowerCase","list","filter","item","title","includes","id","handleClick","curSelectIndex","appIdList","findIndex","updateHighlight","updateCurDetails","handleDoubleClick","launchCurApp","curDetails","link","toggleLaunchpad","openApp","toggleSpotlight","window","open","getTypeAppList","startIndex","result","appList","curIndex","length","bg","setCurDetails","push","img","updateAppList","setState","appId","elem","document","querySelector","dataset","appType","find","prevIndex","prevAppId","prev","classes","className","replace","curAppId","cur","handleKeyPress","e","keyCode","key","numApps","handleInputChange","target","value","focusOnInput","focus","spotlightRef","handleClickOutside","bind","addEventListener","removeEventListener","current","contains","btnRef","zIndex","height"],"mappings":"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","sourcesContent":["import React, { Component, createRef } from \"react\";\nimport format from \"date-fns/format\";\nimport { BiSearch } from \"react-icons/bi\";\nimport apps from \"../configs/apps\";\nimport launchpad from \"../configs/launchpad\";\n\nconst allApps = {\n  app: apps,\n  portfolio: launchpad\n};\n\nconst getRandom = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nconst getRandomDate = () => {\n  const timeStamp = new Date().getTime();\n  const randomStamp = getRandom(0, timeStamp);\n  const date = format(randomStamp, \"MM/dd/yyyy\");\n  return date;\n};\n\nexport default class Spotlight extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n      curDetails: null,\n      appList: null,\n      appIdList: []\n    };\n    this.curSelectIndex = 0;\n    this.spotlightRef = createRef();\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  search = (type) => {\n    if (this.state.searchText === \"\") return [];\n    const text = this.state.searchText.toLowerCase();\n    const list = allApps[type].filter((item) => {\n      return (\n        item.title.toLowerCase().includes(text) ||\n        item.id.toLowerCase().includes(text)\n      );\n    });\n    return list;\n  };\n\n  handleClick = (id) => {\n    const curSelectIndex = this.state.appIdList.findIndex((item) => {\n      return item === id;\n    });\n    this.updateHighlight(this.curSelectIndex, curSelectIndex);\n    this.curSelectIndex = curSelectIndex;\n    this.updateCurDetails();\n  };\n\n  handleDoubleClick = (id) => {\n    this.handleClick(id);\n    this.launchCurApp();\n  };\n\n  handleClickOutside(e) {\n    if (\n      this.spotlightRef &&\n      !this.spotlightRef.current.contains(e.target) &&\n      !this.props.btnRef.current.contains(e.target)\n    )\n      this.props.toggleSpotlight();\n  }\n\n  launchCurApp = () => {\n    if (this.state.curDetails.type === \"app\" && !this.state.curDetails.link) {\n      const id = this.state.curDetails.id;\n      if (id === \"launchpad\") this.props.toggleLaunchpad(true);\n      else this.props.openApp(id);\n      this.props.toggleSpotlight();\n    } else {\n      window.open(this.state.curDetails.link);\n      this.props.toggleSpotlight();\n    }\n  };\n\n  getTypeAppList = (type, startIndex) => {\n    const result = this.search(type);\n    let appList = [];\n    let appIdList = [];\n\n    for (let app of result) {\n      const curIndex = startIndex + appIdList.length;\n      const bg = curIndex === 0 ? \"bg-blue-500\" : \"bg-transparent\";\n      const text = curIndex === 0 ? \"text-white\" : \"text-black\";\n\n      if (curIndex === 0) this.setCurDetails(app, type);\n\n      appList.push(\n        <li\n          id={`spotlight-${app.id}`}\n          key={`spotlight-${app.id}`}\n          className={`pl-4 h-7 w-full pr-1 flex flex-row ${bg} ${text} cursor-default`}\n          data-app-type={type}\n          onClick={() => this.handleClick(app.id)}\n          onDoubleClick={() => this.handleDoubleClick(app.id)}\n        >\n          <div className=\"flex-none w-8 flex items-center\">\n            <img\n              className=\"w-5 mx-auto\"\n              src={app.img}\n              alt={app.title}\n              title={app.title}\n            />\n          </div>\n          <div className=\"flex-grow flex items-center pl-3 overflow-hidden whitespace-nowrap\">\n            {app.title}\n          </div>\n        </li>\n      );\n      appIdList.push(app.id);\n    }\n\n    return {\n      appList: appList,\n      appIdList: appIdList\n    };\n  };\n\n  updateAppList = () => {\n    const app = this.getTypeAppList(\"app\", 0);\n    const portfolio = this.getTypeAppList(\"portfolio\", app.appIdList.length);\n\n    const appIdList = [...app.appIdList, ...portfolio.appIdList];\n    // don't show app details when there is no associating app\n    if (appIdList.length === 0) this.setState({ curDetails: null });\n\n    const appList = (\n      <div>\n        {app.appList.length !== 0 && (\n          <div>\n            <div className=\"pl-6 py-0.5 text-xs leading-none bg-gray-400 bg-opacity-80 flex items-center text-black\">\n              Applications\n            </div>\n            <ul className=\"w-full text-xs\">{app.appList}</ul>\n          </div>\n        )}\n        {portfolio.appList.length !== 0 && (\n          <div>\n            <div className=\"pl-6 py-0.5 text-xs leading-none bg-gray-400 bg-opacity-80 flex items-center text-black\">\n              Portfolio\n            </div>\n            <ul className=\"w-full text-xs\">{portfolio.appList}</ul>\n          </div>\n        )}\n      </div>\n    );\n    this.setState({\n      appList: appList,\n      appIdList: appIdList\n    });\n  };\n\n  setCurDetails = (app, type) => {\n    const curDetails = app;\n    curDetails.type = type;\n    this.setState({ curDetails });\n  };\n\n  updateCurDetails = () => {\n    const appId = this.state.appIdList[this.curSelectIndex];\n    const elem = document.querySelector(`#spotlight-${appId}`);\n    const id = appId;\n    const type = elem.dataset.appType;\n    const app = allApps[type].find((item) => {\n      return item.id === id;\n    });\n    this.setCurDetails(app, type);\n  };\n\n  updateHighlight = (prevIndex, curIndex) => {\n    // remove highlight\n    const prevAppId = this.state.appIdList[prevIndex];\n    const prev = document.querySelector(`#spotlight-${prevAppId}`);\n    let classes = prev.className;\n    classes = classes.replace(\"text-white\", \"text-black\");\n    classes = classes.replace(\"bg-blue-500\", \"bg-transparent\");\n    prev.className = classes;\n\n    // add highlight\n    const curAppId = this.state.appIdList[curIndex];\n    const cur = document.querySelector(`#spotlight-${curAppId}`);\n    classes = cur.className;\n    classes = classes.replace(\"text-black\", \"text-white\");\n    classes = classes.replace(\"bg-transparent\", \"bg-blue-500\");\n    cur.className = classes;\n  };\n\n  handleKeyPress = (e) => {\n    const keyCode = e.key;\n    const numApps = this.state.appIdList.length;\n\n    // ----------- select next app -----------\n    if (keyCode === \"ArrowDown\" && this.curSelectIndex < numApps - 1) {\n      this.curSelectIndex++;\n      this.updateHighlight(this.curSelectIndex - 1, this.curSelectIndex);\n      this.updateCurDetails();\n    }\n    // ----------- select previous app -----------\n    else if (keyCode === \"ArrowUp\" && this.curSelectIndex > 0) {\n      this.curSelectIndex--;\n      this.updateHighlight(this.curSelectIndex + 1, this.curSelectIndex);\n      this.updateCurDetails();\n    }\n    // ----------- launch app -----------\n    else if (keyCode === \"Enter\") {\n      if (!this.state.curDetails) return;\n      this.launchCurApp();\n    }\n  };\n\n  handleInputChange = (e) => {\n    // current selected id go back to 0\n    this.curSelectIndex = 0;\n    // don\"t show app details when there is no input\n    if (e.target.value === \"\") this.setState({ curDetails: null });\n    // update search text and associating app list\n    this.setState(\n      {\n        searchText: e.target.value\n      },\n      () => this.updateAppList()\n    );\n  };\n\n  focusOnInput = () => {\n    document.querySelector(\"#spotlight-input\").focus();\n  };\n\n  render() {\n    return (\n      <div\n        className=\"spotlight fixed top-1/4 -mt-16 h-max rounded-md bg-gray-50 bg-opacity-80 blur border border-gray-400 border-opacity-50 shadow-2xl\"\n        style={{ zIndex: 99997 }}\n        onKeyDown={this.handleKeyPress}\n        onClick={this.focusOnInput}\n        ref={this.spotlightRef}\n      >\n        <div className=\"w-full grid grid-cols-8 sm:grid-cols-11 h-12 sm:h-14 rounded-md bg-transparent\">\n          <div className=\"col-start-1 col-span-1 flex justify-center items-center\">\n            <BiSearch className=\"ml-1 text-gray-600\" size={28} />\n          </div>\n          <input\n            id=\"spotlight-input\"\n            className=\"col-start-2 col-span-7 sm:col-span-10 outline-none focus:outline-none bg-transparent px-1 text-black text-xl sm:text-2xl\"\n            placeholder=\"Spotlight Search\"\n            value={this.state.searchText}\n            onChange={(e) => this.handleInputChange(e)}\n            autoFocus={true}\n          />\n        </div>\n        {this.state.searchText !== \"\" && (\n          <div\n            className=\"bg-transparent flex flex-row border-t border-gray-400 border-opacity-50\"\n            style={{ height: \"341px\" }}\n          >\n            <div className=\"flex-none w-32 sm:w-72 border-r border-gray-400 border-opacity-50 overflow-y-scroll\">\n              {this.state.appList}\n            </div>\n            <div className=\"flex-grow\">\n              {this.state.curDetails && (\n                <div className=\"h-full w-full flex flex-col\">\n                  <div className=\"mx-auto w-4/5 flex-none flex flex-col items-center justify-center h-56 border-b border-gray-400 border-opacity-50\">\n                    <img\n                      className=\"w-32 mx-auto\"\n                      src={this.state.curDetails.img}\n                      alt={this.state.curDetails.title}\n                      title={this.state.curDetails.title}\n                    />\n                    <div className=\"mt-4 text-xl text-black\">\n                      {this.state.curDetails.title}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      {`Version: ${getRandom(0, 99)}.${getRandom(0, 999)}`}\n                    </div>\n                  </div>\n                  <div className=\"flex-grow flex flex-row text-xs\">\n                    <div className=\"flex-none w-1/2 flex flex-col items-end justify-center text-gray-500\">\n                      <div>Kind</div>\n                      <div>Size</div>\n                      <div>Created</div>\n                      <div>Modified</div>\n                      <div>Last opened</div>\n                    </div>\n                    <div className=\"pl-2 flex-grow flex flex-col items-start justify-center text-black\">\n                      <div>\n                        {this.state.curDetails.type === \"app\"\n                          ? \"Application\"\n                          : \"Portfolio\"}\n                      </div>\n                      <div>{`${getRandom(0, 999)} G`}</div>\n                      <div>{getRandomDate()}</div>\n                      <div>{getRandomDate()}</div>\n                      <div>{getRandomDate()}</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}