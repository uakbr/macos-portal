{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usa\\\\Downloads\\\\macos-portfolio-main\\\\src\\\\components\\\\menus\\\\TopBar.js\";\nimport React, { Component, createRef, forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport format from \"date-fns/format\";\nimport AppleMenu from \"./AppleMenu\";\nimport WifiMenu from \"./WifiMenu\";\nimport ControlCenterMenu from \"./ControlCenterMenu\";\nimport { isFullScreen } from \"../../utils/screen\";\nimport { setVolume, setBrightness, toggleFullScreen } from \"../../redux/action\";\nimport music from \"../../configs/music\"; // ------- import icons -------\n\nimport { BsBatteryFull } from \"react-icons/bs\";\nimport { BiSearch } from \"react-icons/bi\";\nimport { FaWifi } from \"react-icons/fa\";\nimport { RiSignalWifiLine } from \"react-icons/ri\";\nimport { AiFillApple } from \"react-icons/ai\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopBarItem = /*#__PURE__*/forwardRef(_c = (props, ref) => {\n  const hide = props.hideOnMobile ? \"hidden sm:inline-flex\" : \"inline-flex\";\n  const hover = props.forceHover ? \"bg-white bg-opacity-30\" : \"hover:bg-white hover:bg-opacity-30 rounded\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    className: `${hide} cursor-default flex-row space-x-1 ${hover} p-1`,\n    onClick: props.onClick,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n});\n_c2 = TopBarItem;\n\nclass TopBar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.resize = () => {\n      const isFull = isFullScreen();\n      this.props.toggleFullScreen(isFull);\n    };\n\n    this.toggleAudio = target => {\n      target ? this.audio.play() : this.audio.pause();\n      this.setState({\n        playing: target\n      });\n    };\n\n    this.setVolume = value => {\n      this.props.setVolume(value);\n      this.audio.volume = value / 100;\n    };\n\n    this.setBrightness = value => {\n      this.props.setBrightness(value);\n    };\n\n    this.toggleControlCenter = () => {\n      this.setState({\n        showControlCenter: !this.state.showControlCenter\n      });\n    };\n\n    this.toggleAppleMenu = () => {\n      this.setState({\n        showAppleMenu: !this.state.showAppleMenu\n      });\n    };\n\n    this.toggleWifiMenu = () => {\n      this.setState({\n        showWifiMenu: !this.state.showWifiMenu\n      });\n    };\n\n    this.logout = () => {\n      this.toggleAudio(false);\n      this.props.setLogin(false);\n    };\n\n    this.shut = e => {\n      this.toggleAudio(false);\n      this.props.shutMac(e);\n    };\n\n    this.restart = e => {\n      this.toggleAudio(false);\n      this.props.restartMac(e);\n    };\n\n    this.sleep = e => {\n      this.toggleAudio(false);\n      this.props.sleepMac(e);\n    };\n\n    this.state = {\n      date: new Date(),\n      showControlCenter: false,\n      showWifiMenu: false,\n      showAppleMenu: false,\n      playing: false\n    };\n    this.clickedOutside = {\n      apple: false,\n      control: false\n    };\n    this.intervalId = null;\n    this.toggleAudio = this.toggleAudio.bind(this);\n    this.appleBtnRef = /*#__PURE__*/createRef();\n    this.controlCenterBtnRef = /*#__PURE__*/createRef();\n    this.wifiBtnRef = /*#__PURE__*/createRef();\n    this.spotlightBtnRef = /*#__PURE__*/createRef();\n    this.resize.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.setSpotlightBtnRef(this.spotlightBtnRef); // current date and time\n    // store intervalId in the state, so we can clear interval later\n\n    this.intervalId = setInterval(() => {\n      this.setState({\n        date: new Date()\n      });\n    }, 60 * 1000); // listen to screen size change\n\n    window.addEventListener(\"resize\", this.resize); // load music\n\n    this.audio = new Audio(music.audio);\n    this.audio.load(); // set volume\n\n    this.audio.volume = this.props.volume / 100; // auto replay\n\n    this.audio.addEventListener(\"ended\", () => this.audio.play());\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n    window.removeEventListener(\"resize\", this.resize);\n    this.audio.removeEventListener(\"ended\", () => this.audio.play());\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nightwind-prevent w-full h-6 px-4 fixed top-0 flex flex-row justify-between items-center text-sm text-white bg-gray-500 bg-opacity-10 blur shadow transition\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(TopBarItem, {\n          forceHover: this.state.showAppleMenu,\n          onClick: () => this.showAppleMenu ? {} : this.toggleAppleMenu(),\n          ref: this.appleBtnRef,\n          children: /*#__PURE__*/_jsxDEV(AiFillApple, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"cursor-default font-semibold\",\n          children: this.props.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), this.state.showAppleMenu && /*#__PURE__*/_jsxDEV(AppleMenu, {\n        logout: this.logout,\n        shut: this.shut,\n        restart: this.restart,\n        sleep: this.sleep,\n        toggleAppleMenu: this.toggleAppleMenu,\n        btnRef: this.appleBtnRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row justify-end items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(TopBarItem, {\n          hideOnMobile: true,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs mt-0.5 mr-1\",\n            children: \"100%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(BsBatteryFull, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TopBarItem, {\n          hideOnMobile: true,\n          onClick: this.toggleWifiMenu,\n          ref: this.wifiBtnRef,\n          children: this.props.wifi ? /*#__PURE__*/_jsxDEV(FaWifi, {\n            size: 17\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(RiSignalWifiLine, {\n            size: 17\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TopBarItem, {\n          ref: this.spotlightBtnRef,\n          onClick: this.props.toggleSpotlight,\n          children: /*#__PURE__*/_jsxDEV(BiSearch, {\n            size: 17\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TopBarItem, {\n          onClick: this.toggleControlCenter,\n          ref: this.controlCenterBtnRef,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-4 h-4 filter invert\",\n            src: \"img/icons/menu/controlcenter.png\",\n            alt: \"control center\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), this.state.showWifiMenu && /*#__PURE__*/_jsxDEV(WifiMenu, {\n          toggleWifiMenu: this.toggleWifiMenu,\n          btnRef: this.wifiBtnRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), this.state.showControlCenter && /*#__PURE__*/_jsxDEV(ControlCenterMenu, {\n          audio: this.audio,\n          playing: this.state.playing,\n          toggleAudio: this.toggleAudio,\n          setVolume: this.setVolume,\n          setBrightness: this.setBrightness,\n          toggleControlCenter: this.toggleControlCenter,\n          btnRef: this.controlCenterBtnRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: format(this.state.date, \"eee MMM d\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: format(this.state.date, \"h:mm aa\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    volume: state.volume,\n    brightness: state.brightness,\n    wifi: state.wifi\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setVolume,\n  setBrightness,\n  toggleFullScreen\n})(TopBar);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TopBarItem$forwardRef\");\n$RefreshReg$(_c2, \"TopBarItem\");","map":{"version":3,"sources":["C:/Users/usa/Downloads/macos-portfolio-main/src/components/menus/TopBar.js"],"names":["React","Component","createRef","forwardRef","connect","format","AppleMenu","WifiMenu","ControlCenterMenu","isFullScreen","setVolume","setBrightness","toggleFullScreen","music","BsBatteryFull","BiSearch","FaWifi","RiSignalWifiLine","AiFillApple","TopBarItem","props","ref","hide","hideOnMobile","hover","forceHover","onClick","children","TopBar","constructor","resize","isFull","toggleAudio","target","audio","play","pause","setState","playing","value","volume","toggleControlCenter","showControlCenter","state","toggleAppleMenu","showAppleMenu","toggleWifiMenu","showWifiMenu","logout","setLogin","shut","e","shutMac","restart","restartMac","sleep","sleepMac","date","Date","clickedOutside","apple","control","intervalId","bind","appleBtnRef","controlCenterBtnRef","wifiBtnRef","spotlightBtnRef","componentDidMount","setSpotlightBtnRef","setInterval","window","addEventListener","Audio","load","componentWillUnmount","clearInterval","removeEventListener","render","title","wifi","toggleSpotlight","mapStateToProps","brightness"],"mappings":"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","sourcesContent":["import React, { Component, createRef, forwardRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport format from \"date-fns/format\";\n\nimport AppleMenu from \"./AppleMenu\";\nimport WifiMenu from \"./WifiMenu\";\nimport ControlCenterMenu from \"./ControlCenterMenu\";\nimport { isFullScreen } from \"../../utils/screen\";\nimport { setVolume, setBrightness, toggleFullScreen } from \"../../redux/action\";\nimport music from \"../../configs/music\";\n\n// ------- import icons -------\nimport { BsBatteryFull } from \"react-icons/bs\";\nimport { BiSearch } from \"react-icons/bi\";\nimport { FaWifi } from \"react-icons/fa\";\nimport { RiSignalWifiLine } from \"react-icons/ri\";\nimport { AiFillApple } from \"react-icons/ai\";\n\nconst TopBarItem = forwardRef((props, ref) => {\n  const hide = props.hideOnMobile ? \"hidden sm:inline-flex\" : \"inline-flex\";\n  const hover = props.forceHover\n    ? \"bg-white bg-opacity-30\"\n    : \"hover:bg-white hover:bg-opacity-30 rounded\";\n  return (\n    <div\n      ref={ref}\n      className={`${hide} cursor-default flex-row space-x-1 ${hover} p-1`}\n      onClick={props.onClick}\n    >\n      {props.children}\n    </div>\n  );\n});\n\nclass TopBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      date: new Date(),\n      showControlCenter: false,\n      showWifiMenu: false,\n      showAppleMenu: false,\n      playing: false\n    };\n    this.clickedOutside = {\n      apple: false,\n      control: false\n    };\n    this.intervalId = null;\n    this.toggleAudio = this.toggleAudio.bind(this);\n    this.appleBtnRef = createRef();\n    this.controlCenterBtnRef = createRef();\n    this.wifiBtnRef = createRef();\n    this.spotlightBtnRef = createRef();\n    this.resize.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.setSpotlightBtnRef(this.spotlightBtnRef);\n\n    // current date and time\n    // store intervalId in the state, so we can clear interval later\n    this.intervalId = setInterval(() => {\n      this.setState({\n        date: new Date()\n      });\n    }, 60 * 1000);\n\n    // listen to screen size change\n    window.addEventListener(\"resize\", this.resize);\n\n    // load music\n    this.audio = new Audio(music.audio);\n    this.audio.load();\n\n    // set volume\n    this.audio.volume = this.props.volume / 100;\n\n    // auto replay\n    this.audio.addEventListener(\"ended\", () => this.audio.play());\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n    window.removeEventListener(\"resize\", this.resize);\n    this.audio.removeEventListener(\"ended\", () => this.audio.play());\n  }\n\n  resize = () => {\n    const isFull = isFullScreen();\n    this.props.toggleFullScreen(isFull);\n  };\n\n  toggleAudio = (target) => {\n    target ? this.audio.play() : this.audio.pause();\n    this.setState({ playing: target });\n  };\n\n  setVolume = (value) => {\n    this.props.setVolume(value);\n    this.audio.volume = value / 100;\n  };\n\n  setBrightness = (value) => {\n    this.props.setBrightness(value);\n  };\n\n  toggleControlCenter = () => {\n    this.setState({\n      showControlCenter: !this.state.showControlCenter\n    });\n  };\n\n  toggleAppleMenu = () => {\n    this.setState({\n      showAppleMenu: !this.state.showAppleMenu\n    });\n  };\n\n  toggleWifiMenu = () => {\n    this.setState({\n      showWifiMenu: !this.state.showWifiMenu\n    });\n  };\n\n  logout = () => {\n    this.toggleAudio(false);\n    this.props.setLogin(false);\n  };\n\n  shut = (e) => {\n    this.toggleAudio(false);\n    this.props.shutMac(e);\n  };\n\n  restart = (e) => {\n    this.toggleAudio(false);\n    this.props.restartMac(e);\n  };\n\n  sleep = (e) => {\n    this.toggleAudio(false);\n    this.props.sleepMac(e);\n  };\n\n  render() {\n    return (\n      <div className=\"nightwind-prevent w-full h-6 px-4 fixed top-0 flex flex-row justify-between items-center text-sm text-white bg-gray-500 bg-opacity-10 blur shadow transition\">\n        <div className=\"flex flex-row items-center space-x-4\">\n          <TopBarItem\n            forceHover={this.state.showAppleMenu}\n            onClick={() => (this.showAppleMenu ? {} : this.toggleAppleMenu())}\n            ref={this.appleBtnRef}\n          >\n            <AiFillApple size={18} />\n          </TopBarItem>\n          <span className=\"cursor-default font-semibold\">\n            {this.props.title}\n          </span>\n        </div>\n\n        {/* Open this when clicking on Apple logo */}\n        {this.state.showAppleMenu && (\n          <AppleMenu\n            logout={this.logout}\n            shut={this.shut}\n            restart={this.restart}\n            sleep={this.sleep}\n            toggleAppleMenu={this.toggleAppleMenu}\n            btnRef={this.appleBtnRef}\n          />\n        )}\n\n        <div className=\"flex flex-row justify-end items-center space-x-2\">\n          <TopBarItem hideOnMobile={true}>\n            <span className=\"text-xs mt-0.5 mr-1\">100%</span>\n            <BsBatteryFull size={20} />\n          </TopBarItem>\n          <TopBarItem\n            hideOnMobile={true}\n            onClick={this.toggleWifiMenu}\n            ref={this.wifiBtnRef}\n          >\n            {this.props.wifi ? (\n              <FaWifi size={17} />\n            ) : (\n              <RiSignalWifiLine size={17} />\n            )}\n          </TopBarItem>\n          <TopBarItem\n            ref={this.spotlightBtnRef}\n            onClick={this.props.toggleSpotlight}\n          >\n            <BiSearch size={17} />\n          </TopBarItem>\n          <TopBarItem\n            onClick={this.toggleControlCenter}\n            ref={this.controlCenterBtnRef}\n          >\n            <img\n              className=\"w-4 h-4 filter invert\"\n              src=\"img/icons/menu/controlcenter.png\"\n              alt=\"control center\"\n            />\n          </TopBarItem>\n\n          {/* Open this when clicking on Wifi button */}\n          {this.state.showWifiMenu && (\n            <WifiMenu\n              toggleWifiMenu={this.toggleWifiMenu}\n              btnRef={this.wifiBtnRef}\n            />\n          )}\n\n          {/* Open this when clicking on Control Center button */}\n          {this.state.showControlCenter && (\n            <ControlCenterMenu\n              audio={this.audio}\n              playing={this.state.playing}\n              toggleAudio={this.toggleAudio}\n              setVolume={this.setVolume}\n              setBrightness={this.setBrightness}\n              toggleControlCenter={this.toggleControlCenter}\n              btnRef={this.controlCenterBtnRef}\n            />\n          )}\n\n          <span>{format(this.state.date, \"eee MMM d\")}</span>\n          <span>{format(this.state.date, \"h:mm aa\")}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    volume: state.volume,\n    brightness: state.brightness,\n    wifi: state.wifi\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setVolume,\n  setBrightness,\n  toggleFullScreen\n})(TopBar);\n"]},"metadata":{},"sourceType":"module"}