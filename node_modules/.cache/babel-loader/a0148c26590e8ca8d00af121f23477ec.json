{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\usa\\\\Downloads\\\\macos-portfolio-main\\\\src\\\\pages\\\\Desktop.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport nightwind from \"nightwind/helper\";\nimport TopBar from \"../components/menus/TopBar\";\nimport Dock from \"../components/dock/Dock\";\nimport Launchpad from \"../components/Launchpad\";\nimport Window from \"../components/Window\";\nimport Spotlight from \"../components/Spotlight\";\nimport apps from \"../configs/apps\";\nimport wallpapers from \"../configs/wallpapers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Desktop extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.getAppsData = () => {\n      let showApps = {},\n          appsZ = {},\n          maxApps = {},\n          minApps = {};\n      apps.forEach(app => {\n        showApps = { ...showApps,\n          [app.id]: app.show\n        };\n        appsZ = { ...appsZ,\n          [app.id]: 2\n        };\n        maxApps = { ...maxApps,\n          [app.id]: false\n        };\n        minApps = { ...minApps,\n          [app.id]: false\n        };\n      });\n      this.setState({\n        showApps\n      });\n    };\n\n    this.toggleLaunchpad = target => {\n      let r = document.querySelector(`#launchpad`);\n\n      if (target) {\n        r.style.transform = \"scale(1)\";\n        r.style.transition = \"ease-in 0.2s\";\n      } else {\n        r.style.transform = \"scale(1.1)\";\n        r.style.transition = \"ease-out 0.2s\";\n      }\n\n      this.setState({\n        showLaunchpad: target\n      });\n    };\n\n    this.toggleSpotlight = () => {\n      this.setState({\n        spotlight: !this.state.spotlight\n      });\n    };\n\n    this.setWinowsPosition = id => {\n      let r = document.querySelector(`#window-${id}`);\n      const rect = r.getBoundingClientRect();\n      r.style.setProperty(\"--window-transform-x\", rect.x.toFixed(1).toString() + \"px\");\n      r.style.setProperty(\"--window-transform-y\", rect.y.toFixed(1).toString() + \"px\");\n    };\n\n    this.closeApp = id => {\n      let showApps = this.state.showApps;\n      showApps[id] = false;\n      this.setState({\n        showApps: showApps,\n        hideDock: false\n      });\n    };\n\n    this.openApp = id => {\n      // add it to the shown app list\n      let showApps = this.state.showApps;\n      showApps[id] = true; // move to the top (use a maximum z-index)\n\n      let appsZ = this.state.appsZ;\n      let maxZ = this.state.maxZ + 1;\n      appsZ[id] = maxZ;\n      this.setState({\n        showApps: showApps,\n        appsZ: appsZ,\n        maxZ: maxZ,\n        currentTitle: apps.find(app => {\n          return app.id === id;\n        }).title\n      });\n      let minApps = this.state.minApps; // if the app has already been shown but minimized\n\n      if (minApps[id]) {\n        // move to window's last position\n        var r = document.querySelector(`#window-${id}`);\n        r.style.transform = `translate(${r.style.getPropertyValue(\"--window-transform-x\")}, ${r.style.getPropertyValue(\"--window-transform-y\")}) scale(1)`;\n        r.style.transition = \"ease-in 0.3s\"; // remove it from the minimized app list\n\n        minApps[id] = false;\n        this.setState({\n          minApps\n        });\n      }\n    };\n\n    this.setAppMax = (id, target) => {\n      let maxApps = this.state.maxApps;\n      if (target === undefined) target = !maxApps[id];\n      maxApps[id] = target;\n      this.setState({\n        maxApps: maxApps,\n        hideDock: target\n      });\n    };\n\n    this.setAppMin = (id, target) => {\n      let minApps = this.state.minApps;\n      if (target === undefined) target = !minApps[id];\n      minApps[id] = target;\n      this.setState({\n        minApps: minApps\n      });\n    };\n\n    this.minimizeApp = id => {\n      this.setWinowsPosition(id); // get the corrosponding dock icon's position\n\n      var r = document.querySelector(`#dock-${id}`);\n      const dockAppRect = r.getBoundingClientRect();\n      r = document.querySelector(`#window-${id}`);\n      const appRect = r.getBoundingClientRect();\n      const posY = document.body.offsetHeight - appRect.y.toFixed(1) - (r.offsetHeight / 2).toFixed(1);\n      const posX = dockAppRect.x.toFixed(1) - (r.offsetWidth / 2).toFixed(1) + 25; // translate the window to that position\n\n      r.style.transform = `translate(${posX}px, ${posY}px) scale(0.2)`;\n      r.style.transition = \"ease-out 0.3s\"; // add it to the minimized app list\n\n      this.setAppMin(id, true);\n    };\n\n    this.renderAppWindows = () => {\n      return apps.map(app => {\n        if (app.desktop && this.state.showApps[app.id]) {\n          const props = {\n            title: app.title,\n            id: app.id,\n            width: app.width,\n            height: app.height,\n            minWidth: app.minWidth,\n            minHeight: app.minHeight,\n            z: this.state.appsZ[app.id],\n            max: this.state.maxApps[app.id],\n            min: this.state.minApps[app.id],\n            close: this.closeApp,\n            setMax: this.setAppMax,\n            setMin: this.minimizeApp,\n            focus: this.openApp\n          };\n          return /*#__PURE__*/_jsxDEV(Window, { ...props,\n            children: app.content\n          }, `desktop-app-${app.id}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 11\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {}, `desktop-app-${app.id}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 16\n          }, this);\n        }\n      });\n    };\n\n    this.state = {\n      showApps: {},\n      appsZ: {},\n      maxApps: {},\n      minApps: {},\n      maxZ: 2,\n      showLaunchpad: false,\n      currentTitle: \"Finder\",\n      hideDock: false,\n      spotlight: false,\n      spotlightBtnRef: null\n    };\n  }\n\n  componentDidMount() {\n    this.getAppsData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-full overflow-hidden bg-center bg-cover\",\n      style: {\n        backgroundImage: `url(${this.props.dark ? wallpapers.night : wallpapers.day})`,\n        filter: `brightness( ${this.props.brightness * 0.7 + 50}% )`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"script\", {\n        dangerouslySetInnerHTML: {\n          __html: nightwind.init()\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TopBar, {\n        title: this.state.currentTitle,\n        setLogin: this.props.setLogin,\n        shutMac: this.props.shutMac,\n        sleepMac: this.props.sleepMac,\n        restartMac: this.props.restartMac,\n        toggleSpotlight: this.toggleSpotlight,\n        setSpotlightBtnRef: value => {\n          this.setState({\n            spotlightBtnRef: value\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), this.renderAppWindows(), this.state.spotlight && /*#__PURE__*/_jsxDEV(Spotlight, {\n        openApp: this.openApp,\n        toggleLaunchpad: this.toggleLaunchpad,\n        toggleSpotlight: this.toggleSpotlight,\n        btnRef: this.state.spotlightBtnRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Launchpad, {\n        show: this.state.showLaunchpad,\n        toggleLaunchpad: this.toggleLaunchpad\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dock, {\n        open: this.openApp,\n        showApps: this.state.showApps,\n        showLaunchpad: this.state.showLaunchpad,\n        toggleLaunchpad: this.toggleLaunchpad,\n        hide: this.state.hideDock\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    dark: state.dark,\n    brightness: state.brightness\n  };\n};\n\nexport default connect(mapStateToProps, null)(Desktop);","map":{"version":3,"sources":["C:/Users/usa/Downloads/macos-portfolio-main/src/pages/Desktop.js"],"names":["React","Component","connect","nightwind","TopBar","Dock","Launchpad","Window","Spotlight","apps","wallpapers","Desktop","constructor","props","getAppsData","showApps","appsZ","maxApps","minApps","forEach","app","id","show","setState","toggleLaunchpad","target","r","document","querySelector","style","transform","transition","showLaunchpad","toggleSpotlight","spotlight","state","setWinowsPosition","rect","getBoundingClientRect","setProperty","x","toFixed","toString","y","closeApp","hideDock","openApp","maxZ","currentTitle","find","title","getPropertyValue","setAppMax","undefined","setAppMin","minimizeApp","dockAppRect","appRect","posY","body","offsetHeight","posX","offsetWidth","renderAppWindows","map","desktop","width","height","minWidth","minHeight","z","max","min","close","setMax","setMin","focus","content","spotlightBtnRef","componentDidMount","render","backgroundImage","dark","night","day","filter","brightness","__html","init","setLogin","shutMac","sleepMac","restartMac","value","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AAEA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;;;AAEA,MAAMC,OAAN,SAAsBV,SAAtB,CAAgC;AAC9BW,EAAAA,WAAW,CAACC,MAAD,EAAQ;AACjB,UAAMA,MAAN;;AADiB,SAoBnBC,WApBmB,GAoBL,MAAM;AAClB,UAAIC,QAAQ,GAAG,EAAf;AAAA,UACEC,KAAK,GAAG,EADV;AAAA,UAEEC,OAAO,GAAG,EAFZ;AAAA,UAGEC,OAAO,GAAG,EAHZ;AAKAT,MAAAA,IAAI,CAACU,OAAL,CAAcC,GAAD,IAAS;AACpBL,QAAAA,QAAQ,GAAG,EACT,GAAGA,QADM;AAET,WAACK,GAAG,CAACC,EAAL,GAAUD,GAAG,CAACE;AAFL,SAAX;AAIAN,QAAAA,KAAK,GAAG,EACN,GAAGA,KADG;AAEN,WAACI,GAAG,CAACC,EAAL,GAAU;AAFJ,SAAR;AAIAJ,QAAAA,OAAO,GAAG,EACR,GAAGA,OADK;AAER,WAACG,GAAG,CAACC,EAAL,GAAU;AAFF,SAAV;AAIAH,QAAAA,OAAO,GAAG,EACR,GAAGA,OADK;AAER,WAACE,GAAG,CAACC,EAAL,GAAU;AAFF,SAAV;AAID,OAjBD;AAmBA,WAAKE,QAAL,CAAc;AAAER,QAAAA;AAAF,OAAd;AACD,KA9CkB;;AAAA,SAgDnBS,eAhDmB,GAgDAC,MAAD,IAAY;AAC5B,UAAIC,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAwB,YAAxB,CAAR;;AACA,UAAIH,MAAJ,EAAY;AACVC,QAAAA,CAAC,CAACG,KAAF,CAAQC,SAAR,GAAoB,UAApB;AACAJ,QAAAA,CAAC,CAACG,KAAF,CAAQE,UAAR,GAAqB,cAArB;AACD,OAHD,MAGO;AACLL,QAAAA,CAAC,CAACG,KAAF,CAAQC,SAAR,GAAoB,YAApB;AACAJ,QAAAA,CAAC,CAACG,KAAF,CAAQE,UAAR,GAAqB,eAArB;AACD;;AAED,WAAKR,QAAL,CAAc;AAAES,QAAAA,aAAa,EAAEP;AAAjB,OAAd;AACD,KA3DkB;;AAAA,SA6DnBQ,eA7DmB,GA6DD,MAAM;AACtB,WAAKV,QAAL,CAAc;AAAEW,QAAAA,SAAS,EAAE,CAAC,KAAKC,KAAL,CAAWD;AAAzB,OAAd;AACD,KA/DkB;;AAAA,SAiEnBE,iBAjEmB,GAiEEf,EAAD,IAAQ;AAC1B,UAAIK,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAwB,WAAUP,EAAG,EAArC,CAAR;AACA,YAAMgB,IAAI,GAAGX,CAAC,CAACY,qBAAF,EAAb;AACAZ,MAAAA,CAAC,CAACG,KAAF,CAAQU,WAAR,CACE,sBADF,EAEEF,IAAI,CAACG,CAAL,CAAOC,OAAP,CAAe,CAAf,EAAkBC,QAAlB,KAA+B,IAFjC;AAIAhB,MAAAA,CAAC,CAACG,KAAF,CAAQU,WAAR,CACE,sBADF,EAEEF,IAAI,CAACM,CAAL,CAAOF,OAAP,CAAe,CAAf,EAAkBC,QAAlB,KAA+B,IAFjC;AAID,KA5EkB;;AAAA,SA8EnBE,QA9EmB,GA8EPvB,EAAD,IAAQ;AACjB,UAAIN,QAAQ,GAAG,KAAKoB,KAAL,CAAWpB,QAA1B;AACAA,MAAAA,QAAQ,CAACM,EAAD,CAAR,GAAe,KAAf;AACA,WAAKE,QAAL,CAAc;AACZR,QAAAA,QAAQ,EAAEA,QADE;AAEZ8B,QAAAA,QAAQ,EAAE;AAFE,OAAd;AAID,KArFkB;;AAAA,SAuFnBC,OAvFmB,GAuFRzB,EAAD,IAAQ;AAChB;AACA,UAAIN,QAAQ,GAAG,KAAKoB,KAAL,CAAWpB,QAA1B;AACAA,MAAAA,QAAQ,CAACM,EAAD,CAAR,GAAe,IAAf,CAHgB,CAKhB;;AACA,UAAIL,KAAK,GAAG,KAAKmB,KAAL,CAAWnB,KAAvB;AACA,UAAI+B,IAAI,GAAG,KAAKZ,KAAL,CAAWY,IAAX,GAAkB,CAA7B;AACA/B,MAAAA,KAAK,CAACK,EAAD,CAAL,GAAY0B,IAAZ;AAEA,WAAKxB,QAAL,CAAc;AACZR,QAAAA,QAAQ,EAAEA,QADE;AAEZC,QAAAA,KAAK,EAAEA,KAFK;AAGZ+B,QAAAA,IAAI,EAAEA,IAHM;AAIZC,QAAAA,YAAY,EAAEvC,IAAI,CAACwC,IAAL,CAAW7B,GAAD,IAAS;AAC/B,iBAAOA,GAAG,CAACC,EAAJ,KAAWA,EAAlB;AACD,SAFa,EAEX6B;AANS,OAAd;AASA,UAAIhC,OAAO,GAAG,KAAKiB,KAAL,CAAWjB,OAAzB,CAnBgB,CAoBhB;;AACA,UAAIA,OAAO,CAACG,EAAD,CAAX,EAAiB;AACf;AACA,YAAIK,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAwB,WAAUP,EAAG,EAArC,CAAR;AACAK,QAAAA,CAAC,CAACG,KAAF,CAAQC,SAAR,GAAqB,aAAYJ,CAAC,CAACG,KAAF,CAAQsB,gBAAR,CAC/B,sBAD+B,CAE/B,KAAIzB,CAAC,CAACG,KAAF,CAAQsB,gBAAR,CAAyB,sBAAzB,CAAiD,YAFvD;AAGAzB,QAAAA,CAAC,CAACG,KAAF,CAAQE,UAAR,GAAqB,cAArB,CANe,CAOf;;AACAb,QAAAA,OAAO,CAACG,EAAD,CAAP,GAAc,KAAd;AACA,aAAKE,QAAL,CAAc;AAAEL,UAAAA;AAAF,SAAd;AACD;AACF,KAvHkB;;AAAA,SAyHnBkC,SAzHmB,GAyHP,CAAC/B,EAAD,EAAKI,MAAL,KAAgB;AAC1B,UAAIR,OAAO,GAAG,KAAKkB,KAAL,CAAWlB,OAAzB;AACA,UAAIQ,MAAM,KAAK4B,SAAf,EAA0B5B,MAAM,GAAG,CAACR,OAAO,CAACI,EAAD,CAAjB;AAC1BJ,MAAAA,OAAO,CAACI,EAAD,CAAP,GAAcI,MAAd;AACA,WAAKF,QAAL,CAAc;AACZN,QAAAA,OAAO,EAAEA,OADG;AAEZ4B,QAAAA,QAAQ,EAAEpB;AAFE,OAAd;AAID,KAjIkB;;AAAA,SAmInB6B,SAnImB,GAmIP,CAACjC,EAAD,EAAKI,MAAL,KAAgB;AAC1B,UAAIP,OAAO,GAAG,KAAKiB,KAAL,CAAWjB,OAAzB;AACA,UAAIO,MAAM,KAAK4B,SAAf,EAA0B5B,MAAM,GAAG,CAACP,OAAO,CAACG,EAAD,CAAjB;AAC1BH,MAAAA,OAAO,CAACG,EAAD,CAAP,GAAcI,MAAd;AACA,WAAKF,QAAL,CAAc;AACZL,QAAAA,OAAO,EAAEA;AADG,OAAd;AAGD,KA1IkB;;AAAA,SA4InBqC,WA5ImB,GA4IJlC,EAAD,IAAQ;AACpB,WAAKe,iBAAL,CAAuBf,EAAvB,EADoB,CAGpB;;AACA,UAAIK,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAwB,SAAQP,EAAG,EAAnC,CAAR;AACA,YAAMmC,WAAW,GAAG9B,CAAC,CAACY,qBAAF,EAApB;AAEAZ,MAAAA,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAwB,WAAUP,EAAG,EAArC,CAAJ;AACA,YAAMoC,OAAO,GAAG/B,CAAC,CAACY,qBAAF,EAAhB;AACA,YAAMoB,IAAI,GACR/B,QAAQ,CAACgC,IAAT,CAAcC,YAAd,GACAH,OAAO,CAACd,CAAR,CAAUF,OAAV,CAAkB,CAAlB,CADA,GAEA,CAACf,CAAC,CAACkC,YAAF,GAAiB,CAAlB,EAAqBnB,OAArB,CAA6B,CAA7B,CAHF;AAIA,YAAMoB,IAAI,GAAGL,WAAW,CAAChB,CAAZ,CAAcC,OAAd,CAAsB,CAAtB,IAA2B,CAACf,CAAC,CAACoC,WAAF,GAAgB,CAAjB,EAAoBrB,OAApB,CAA4B,CAA5B,CAA3B,GAA4D,EAAzE,CAboB,CAepB;;AACAf,MAAAA,CAAC,CAACG,KAAF,CAAQC,SAAR,GAAqB,aAAY+B,IAAK,OAAMH,IAAK,gBAAjD;AACAhC,MAAAA,CAAC,CAACG,KAAF,CAAQE,UAAR,GAAqB,eAArB,CAjBoB,CAmBpB;;AACA,WAAKuB,SAAL,CAAejC,EAAf,EAAmB,IAAnB;AACD,KAjKkB;;AAAA,SAmKnB0C,gBAnKmB,GAmKA,MAAM;AACvB,aAAOtD,IAAI,CAACuD,GAAL,CAAU5C,GAAD,IAAS;AACvB,YAAIA,GAAG,CAAC6C,OAAJ,IAAe,KAAK9B,KAAL,CAAWpB,QAAX,CAAoBK,GAAG,CAACC,EAAxB,CAAnB,EAAgD;AAC9C,gBAAMR,KAAK,GAAG;AACZqC,YAAAA,KAAK,EAAE9B,GAAG,CAAC8B,KADC;AAEZ7B,YAAAA,EAAE,EAAED,GAAG,CAACC,EAFI;AAGZ6C,YAAAA,KAAK,EAAE9C,GAAG,CAAC8C,KAHC;AAIZC,YAAAA,MAAM,EAAE/C,GAAG,CAAC+C,MAJA;AAKZC,YAAAA,QAAQ,EAAEhD,GAAG,CAACgD,QALF;AAMZC,YAAAA,SAAS,EAAEjD,GAAG,CAACiD,SANH;AAOZC,YAAAA,CAAC,EAAE,KAAKnC,KAAL,CAAWnB,KAAX,CAAiBI,GAAG,CAACC,EAArB,CAPS;AAQZkD,YAAAA,GAAG,EAAE,KAAKpC,KAAL,CAAWlB,OAAX,CAAmBG,GAAG,CAACC,EAAvB,CARO;AASZmD,YAAAA,GAAG,EAAE,KAAKrC,KAAL,CAAWjB,OAAX,CAAmBE,GAAG,CAACC,EAAvB,CATO;AAUZoD,YAAAA,KAAK,EAAE,KAAK7B,QAVA;AAWZ8B,YAAAA,MAAM,EAAE,KAAKtB,SAXD;AAYZuB,YAAAA,MAAM,EAAE,KAAKpB,WAZD;AAaZqB,YAAAA,KAAK,EAAE,KAAK9B;AAbA,WAAd;AAgBA,8BACE,QAAC,MAAD,OAA0CjC,KAA1C;AAAA,sBACGO,GAAG,CAACyD;AADP,aAAc,eAAczD,GAAG,CAACC,EAAG,EAAnC;AAAA;AAAA;AAAA;AAAA,kBADF;AAKD,SAtBD,MAsBO;AACL,8BAAO,mBAAW,eAAcD,GAAG,CAACC,EAAG,EAAhC;AAAA;AAAA;AAAA;AAAA,kBAAP;AACD;AACF,OA1BM,CAAP;AA2BD,KA/LkB;;AAEjB,SAAKc,KAAL,GAAa;AACXpB,MAAAA,QAAQ,EAAE,EADC;AAEXC,MAAAA,KAAK,EAAE,EAFI;AAGXC,MAAAA,OAAO,EAAE,EAHE;AAIXC,MAAAA,OAAO,EAAE,EAJE;AAKX6B,MAAAA,IAAI,EAAE,CALK;AAMXf,MAAAA,aAAa,EAAE,KANJ;AAOXgB,MAAAA,YAAY,EAAE,QAPH;AAQXH,MAAAA,QAAQ,EAAE,KARC;AASXX,MAAAA,SAAS,EAAE,KATA;AAUX4C,MAAAA,eAAe,EAAE;AAVN,KAAb;AAYD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKjE,WAAL;AACD;;AA+KDkE,EAAAA,MAAM,GAAG;AACP,wBACE;AACE,MAAA,SAAS,EAAC,kDADZ;AAEE,MAAA,KAAK,EAAE;AACLC,QAAAA,eAAe,EAAG,OAChB,KAAKpE,KAAL,CAAWqE,IAAX,GAAkBxE,UAAU,CAACyE,KAA7B,GAAqCzE,UAAU,CAAC0E,GACjD,GAHI;AAILC,QAAAA,MAAM,EAAG,eAAc,KAAKxE,KAAL,CAAWyE,UAAX,GAAwB,GAAxB,GAA8B,EAAG;AAJnD,OAFT;AAAA,8BAUE;AAAQ,QAAA,uBAAuB,EAAE;AAAEC,UAAAA,MAAM,EAAEpF,SAAS,CAACqF,IAAV;AAAV;AAAjC;AAAA;AAAA;AAAA;AAAA,cAVF,eAaE,QAAC,MAAD;AACE,QAAA,KAAK,EAAE,KAAKrD,KAAL,CAAWa,YADpB;AAEE,QAAA,QAAQ,EAAE,KAAKnC,KAAL,CAAW4E,QAFvB;AAGE,QAAA,OAAO,EAAE,KAAK5E,KAAL,CAAW6E,OAHtB;AAIE,QAAA,QAAQ,EAAE,KAAK7E,KAAL,CAAW8E,QAJvB;AAKE,QAAA,UAAU,EAAE,KAAK9E,KAAL,CAAW+E,UALzB;AAME,QAAA,eAAe,EAAE,KAAK3D,eANxB;AAOE,QAAA,kBAAkB,EAAG4D,KAAD,IAAW;AAC7B,eAAKtE,QAAL,CAAc;AACZuD,YAAAA,eAAe,EAAEe;AADL,WAAd;AAGD;AAXH;AAAA;AAAA;AAAA;AAAA,cAbF,EA4BG,KAAK9B,gBAAL,EA5BH,EA+BG,KAAK5B,KAAL,CAAWD,SAAX,iBACC,QAAC,SAAD;AACE,QAAA,OAAO,EAAE,KAAKY,OADhB;AAEE,QAAA,eAAe,EAAE,KAAKtB,eAFxB;AAGE,QAAA,eAAe,EAAE,KAAKS,eAHxB;AAIE,QAAA,MAAM,EAAE,KAAKE,KAAL,CAAW2C;AAJrB;AAAA;AAAA;AAAA;AAAA,cAhCJ,eAyCE,QAAC,SAAD;AACE,QAAA,IAAI,EAAE,KAAK3C,KAAL,CAAWH,aADnB;AAEE,QAAA,eAAe,EAAE,KAAKR;AAFxB;AAAA;AAAA;AAAA;AAAA,cAzCF,eA+CE,QAAC,IAAD;AACE,QAAA,IAAI,EAAE,KAAKsB,OADb;AAEE,QAAA,QAAQ,EAAE,KAAKX,KAAL,CAAWpB,QAFvB;AAGE,QAAA,aAAa,EAAE,KAAKoB,KAAL,CAAWH,aAH5B;AAIE,QAAA,eAAe,EAAE,KAAKR,eAJxB;AAKE,QAAA,IAAI,EAAE,KAAKW,KAAL,CAAWU;AALnB;AAAA;AAAA;AAAA;AAAA,cA/CF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAyDD;;AA5P6B;;AA+PhC,MAAMiD,eAAe,GAAI3D,KAAD,IAAW;AACjC,SAAO;AACL+C,IAAAA,IAAI,EAAE/C,KAAK,CAAC+C,IADP;AAELI,IAAAA,UAAU,EAAEnD,KAAK,CAACmD;AAFb,GAAP;AAID,CALD;;AAOA,eAAepF,OAAO,CAAC4F,eAAD,EAAkB,IAAlB,CAAP,CAA+BnF,OAA/B,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport nightwind from \"nightwind/helper\";\n\nimport TopBar from \"../components/menus/TopBar\";\nimport Dock from \"../components/dock/Dock\";\nimport Launchpad from \"../components/Launchpad\";\nimport Window from \"../components/Window\";\nimport Spotlight from \"../components/Spotlight\";\nimport apps from \"../configs/apps\";\nimport wallpapers from \"../configs/wallpapers\";\n\nclass Desktop extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showApps: {},\n      appsZ: {},\n      maxApps: {},\n      minApps: {},\n      maxZ: 2,\n      showLaunchpad: false,\n      currentTitle: \"Finder\",\n      hideDock: false,\n      spotlight: false,\n      spotlightBtnRef: null\n    };\n  }\n\n  componentDidMount() {\n    this.getAppsData();\n  }\n\n  getAppsData = () => {\n    let showApps = {},\n      appsZ = {},\n      maxApps = {},\n      minApps = {};\n\n    apps.forEach((app) => {\n      showApps = {\n        ...showApps,\n        [app.id]: app.show\n      };\n      appsZ = {\n        ...appsZ,\n        [app.id]: 2\n      };\n      maxApps = {\n        ...maxApps,\n        [app.id]: false\n      };\n      minApps = {\n        ...minApps,\n        [app.id]: false\n      };\n    });\n\n    this.setState({ showApps });\n  };\n\n  toggleLaunchpad = (target) => {\n    let r = document.querySelector(`#launchpad`);\n    if (target) {\n      r.style.transform = \"scale(1)\";\n      r.style.transition = \"ease-in 0.2s\";\n    } else {\n      r.style.transform = \"scale(1.1)\";\n      r.style.transition = \"ease-out 0.2s\";\n    }\n\n    this.setState({ showLaunchpad: target });\n  };\n\n  toggleSpotlight = () => {\n    this.setState({ spotlight: !this.state.spotlight });\n  };\n\n  setWinowsPosition = (id) => {\n    let r = document.querySelector(`#window-${id}`);\n    const rect = r.getBoundingClientRect();\n    r.style.setProperty(\n      \"--window-transform-x\",\n      rect.x.toFixed(1).toString() + \"px\"\n    );\n    r.style.setProperty(\n      \"--window-transform-y\",\n      rect.y.toFixed(1).toString() + \"px\"\n    );\n  };\n\n  closeApp = (id) => {\n    let showApps = this.state.showApps;\n    showApps[id] = false;\n    this.setState({\n      showApps: showApps,\n      hideDock: false\n    });\n  };\n\n  openApp = (id) => {\n    // add it to the shown app list\n    let showApps = this.state.showApps;\n    showApps[id] = true;\n\n    // move to the top (use a maximum z-index)\n    let appsZ = this.state.appsZ;\n    let maxZ = this.state.maxZ + 1;\n    appsZ[id] = maxZ;\n\n    this.setState({\n      showApps: showApps,\n      appsZ: appsZ,\n      maxZ: maxZ,\n      currentTitle: apps.find((app) => {\n        return app.id === id;\n      }).title\n    });\n\n    let minApps = this.state.minApps;\n    // if the app has already been shown but minimized\n    if (minApps[id]) {\n      // move to window's last position\n      var r = document.querySelector(`#window-${id}`);\n      r.style.transform = `translate(${r.style.getPropertyValue(\n        \"--window-transform-x\"\n      )}, ${r.style.getPropertyValue(\"--window-transform-y\")}) scale(1)`;\n      r.style.transition = \"ease-in 0.3s\";\n      // remove it from the minimized app list\n      minApps[id] = false;\n      this.setState({ minApps });\n    }\n  };\n\n  setAppMax = (id, target) => {\n    let maxApps = this.state.maxApps;\n    if (target === undefined) target = !maxApps[id];\n    maxApps[id] = target;\n    this.setState({\n      maxApps: maxApps,\n      hideDock: target\n    });\n  };\n\n  setAppMin = (id, target) => {\n    let minApps = this.state.minApps;\n    if (target === undefined) target = !minApps[id];\n    minApps[id] = target;\n    this.setState({\n      minApps: minApps\n    });\n  };\n\n  minimizeApp = (id) => {\n    this.setWinowsPosition(id);\n\n    // get the corrosponding dock icon's position\n    var r = document.querySelector(`#dock-${id}`);\n    const dockAppRect = r.getBoundingClientRect();\n\n    r = document.querySelector(`#window-${id}`);\n    const appRect = r.getBoundingClientRect();\n    const posY =\n      document.body.offsetHeight -\n      appRect.y.toFixed(1) -\n      (r.offsetHeight / 2).toFixed(1);\n    const posX = dockAppRect.x.toFixed(1) - (r.offsetWidth / 2).toFixed(1) + 25;\n\n    // translate the window to that position\n    r.style.transform = `translate(${posX}px, ${posY}px) scale(0.2)`;\n    r.style.transition = \"ease-out 0.3s\";\n\n    // add it to the minimized app list\n    this.setAppMin(id, true);\n  };\n\n  renderAppWindows = () => {\n    return apps.map((app) => {\n      if (app.desktop && this.state.showApps[app.id]) {\n        const props = {\n          title: app.title,\n          id: app.id,\n          width: app.width,\n          height: app.height,\n          minWidth: app.minWidth,\n          minHeight: app.minHeight,\n          z: this.state.appsZ[app.id],\n          max: this.state.maxApps[app.id],\n          min: this.state.minApps[app.id],\n          close: this.closeApp,\n          setMax: this.setAppMax,\n          setMin: this.minimizeApp,\n          focus: this.openApp\n        };\n\n        return (\n          <Window key={`desktop-app-${app.id}`} {...props}>\n            {app.content}\n          </Window>\n        );\n      } else {\n        return <div key={`desktop-app-${app.id}`} />;\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div\n        className=\"w-full h-full overflow-hidden bg-center bg-cover\"\n        style={{\n          backgroundImage: `url(${\n            this.props.dark ? wallpapers.night : wallpapers.day\n          })`,\n          filter: `brightness( ${this.props.brightness * 0.7 + 50}% )`\n        }}\n      >\n        {/* Dark Model Toggler */}\n        <script dangerouslySetInnerHTML={{ __html: nightwind.init() }} />\n\n        {/* Top Menu Bar */}\n        <TopBar\n          title={this.state.currentTitle}\n          setLogin={this.props.setLogin}\n          shutMac={this.props.shutMac}\n          sleepMac={this.props.sleepMac}\n          restartMac={this.props.restartMac}\n          toggleSpotlight={this.toggleSpotlight}\n          setSpotlightBtnRef={(value) => {\n            this.setState({\n              spotlightBtnRef: value\n            });\n          }}\n        />\n\n        {/* Desktop Apps */}\n        {this.renderAppWindows()}\n\n        {/* Spotlight */}\n        {this.state.spotlight && (\n          <Spotlight\n            openApp={this.openApp}\n            toggleLaunchpad={this.toggleLaunchpad}\n            toggleSpotlight={this.toggleSpotlight}\n            btnRef={this.state.spotlightBtnRef}\n          />\n        )}\n\n        {/* Launchpad */}\n        <Launchpad\n          show={this.state.showLaunchpad}\n          toggleLaunchpad={this.toggleLaunchpad}\n        />\n\n        {/* Dock */}\n        <Dock\n          open={this.openApp}\n          showApps={this.state.showApps}\n          showLaunchpad={this.state.showLaunchpad}\n          toggleLaunchpad={this.toggleLaunchpad}\n          hide={this.state.hideDock}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    dark: state.dark,\n    brightness: state.brightness\n  };\n};\n\nexport default connect(mapStateToProps, null)(Desktop);\n"]},"metadata":{},"sourceType":"module"}